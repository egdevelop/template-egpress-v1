---
interface Props {
  categories: string[];
  activeCategory?: string;
}

const { categories, activeCategory } = Astro.props;

const allCategories = ['all', ...categories];
---

<div class="flex flex-wrap gap-2">
  {allCategories.map((category) => {
    const isActive = activeCategory === category || (!activeCategory && category === 'all');
    return (
      <button
        data-category={category}
        class={`category-filter px-4 py-2 rounded-full text-sm font-medium transition-all ${
          isActive 
            ? 'bg-rose-600 text-white' 
            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
        }`}
      >
        {category === 'all' ? 'All Posts' : category.replace('-', ' ')}
      </button>
    );
  })}
</div>

<script>
  const filterButtons = document.querySelectorAll('.category-filter');
  const blogCards = document.querySelectorAll('[data-blog-card]');

  filterButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const category = button.getAttribute('data-category');
      
      filterButtons.forEach((btn) => {
        btn.classList.remove('bg-rose-600', 'text-white');
        btn.classList.add('bg-gray-100', 'text-gray-600');
      });
      
      button.classList.remove('bg-gray-100', 'text-gray-600');
      button.classList.add('bg-rose-600', 'text-white');
      
      blogCards.forEach((card) => {
        const cardCategory = card.getAttribute('data-category');
        if (category === 'all' || cardCategory === category) {
          (card as HTMLElement).style.display = '';
        } else {
          (card as HTMLElement).style.display = 'none';
        }
      });
    });
  });
</script>
